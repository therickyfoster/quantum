<!--
  Quantum Secure Platform for Streamers

  This standalone HTML document implements a proof‑of‑concept “quantum secure” streaming
  portal with a layered, fault‑tolerant architecture.  It features a photorealistic
  star‑field animation, Habitica API integration, an in‑browser large language model
  (WebLLM) chat interface, local persistence via IndexedDB, and a demo of secure
  audio/video capture with optional encryption.  When one component fails, the
  application automatically falls back to offline data or simplified behavior.

  The design follows a “presentation schema” inspired by the user’s requested site
  structure.  The page is fully self contained and does not rely on external assets
  except optional CDN imports for WebLLM and the Habitica API.

  Note:  This document is intentionally verbose and contains extensive comments
  explaining each section.  It is formatted so that it can be split into smaller
  segments if necessary for easier reading on small devices (e.g. ~80 % of token
  capacity per output).  Citations in the accompanying explanation refer to
  authoritative sources on the Web APIs used (e.g. MDN).  They are not part of the
  actual HTML file.
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- SEO metadata -->
  <title>Quantum Secure Streaming Platform</title>
  <meta
    name="description"
    content="A photorealistic star‑themed, quantum secure streaming platform integrating Habitica, WebLLM, IndexedDB and layered redundancy for streamers."
  />
  <meta
    name="keywords"
    content="quantum secure, streaming platform, Habitica integration, WebLLM, IndexedDB, star field animation, offline chat, secure video, encrypted streaming"
  />
  <meta name="author" content="Generated by ChatGPT" />
  <meta name="robots" content="index, follow" />
  <!-- OpenGraph for social media preview -->
  <meta property="og:title" content="Quantum Secure Streaming Platform" />
  <meta
    property="og:description"
    content="A secure and resilient streaming portal featuring a star‑field backdrop, in‑browser AI chat, Habitica tasks, encrypted video and persistent storage."
  />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/w8AAusB9ZemUakAAAAASUVORK5CYII=" />
  <!-- Dark theme styling and layout -->
  <style>
    :root {
      color-scheme: dark;
      --bg-color: #010a1a;
      --panel-bg: rgba(0, 0, 0, 0.6);
      --accent-color: #00b4d8;
      --error-color: #d90429;
      --success-color: #38b000;
      --font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }
    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      font-family: var(--font-family);
      background-color: var(--bg-color);
      color: #fff;
    }
    #starfield {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: #010a1a;
    }
    header {
      padding: 10px 20px;
      background: var(--panel-bg);
      backdrop-filter: blur(4px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    header h1 {
      margin: 0;
      font-size: 1.5rem;
    }
    header nav a {
      color: var(--accent-color);
      margin-left: 15px;
      text-decoration: none;
    }
    main {
      display: flex;
      flex-direction: column;
      height: calc(100% - 60px);
      overflow-y: auto;
    }
    section {
      margin: 20px;
      padding: 15px;
      background: var(--panel-bg);
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    }
    section h2 {
      margin-top: 0;
      margin-bottom: 10px;
      font-size: 1.2rem;
      color: var(--accent-color);
    }
    /* Chat UI styling */
    #chat-container {
      display: flex;
      flex-direction: column;
      height: 300px;
    }
    #chat-log {
      flex: 1;
      overflow-y: auto;
      margin-bottom: 10px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 4px;
      font-size: 0.9rem;
    }
    #chat-input {
      display: flex;
    }
    #chat-input textarea {
      flex: 1;
      resize: none;
      padding: 8px;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 4px;
      color: #fff;
      font-family: var(--font-family);
    }
    #chat-input button {
      margin-left: 10px;
      background: var(--accent-color);
      border: none;
      color: #fff;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
    }
    /* Habitica section styling */
    #habitica-tasks {
      max-height: 200px;
      overflow-y: auto;
      margin-top: 10px;
    }
    .task-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 5px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    .task-item button {
      background: var(--accent-color);
      border: none;
      color: #fff;
      padding: 5px 8px;
      border-radius: 3px;
      cursor: pointer;
    }
    /* Video streaming section */
    #video-container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #localVideo {
      width: 100%;
      max-height: 300px;
      background: #000;
      border-radius: 4px;
    }
    #stream-controls {
      margin-top: 10px;
      display: flex;
      gap: 10px;
    }
    #stream-controls button {
      background: var(--accent-color);
      border: none;
      color: #fff;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
    }
    /* Log section */
    #log-container {
      max-height: 150px;
      overflow-y: auto;
      background: rgba(255, 255, 255, 0.05);
      padding: 10px;
      border-radius: 4px;
      font-size: 0.8rem;
    }
    /* Responsive adjustments */
    @media (min-width: 768px) {
      main {
        flex-direction: row;
        flex-wrap: wrap;
        align-content: flex-start;
      }
      section {
        flex: 1 1 calc(50% - 40px);
        margin: 20px;
      }
      #video-container {
        flex-direction: row;
        align-items: flex-start;
      }
      #localVideo {
        width: 60%;
      }
    }
  </style>
</head>
<body>
  <!-- Photorealistic star field canvas -->
  <canvas id="starfield"></canvas>
  <!-- Header with basic navigation -->
  <header>
    <h1>Quantum Secure Streamer</h1>
    <nav>
      <a href="#stream">Stream</a>
      <a href="#habitica">Habitica</a>
      <a href="#chat">Chat</a>
    </nav>
  </header>
  <!-- Main content wraps all feature panels -->
  <main>
    <!-- Streaming panel -->
    <section id="stream" aria-label="Streaming panel">
      <h2>Secure Streaming</h2>
      <div id="video-container">
        <video id="localVideo" autoplay muted playsinline></video>
        <div id="stream-controls">
          <button id="startStream">Start Stream</button>
          <button id="stopStream" disabled>Stop Stream</button>
          <button id="downloadRecording" disabled>Download Recording</button>
        </div>
      </div>
      <p>Capture your camera and microphone securely.  Video chunks are encrypted
        using the Web Crypto API before being stored or transmitted.  If camera
        access fails, the platform attempts to capture audio only and falls back
        gracefully.</p>
    </section>
    <!-- Habitica panel -->
    <section id="habitica" aria-label="Habitica panel">
      <h2>Habitica Integration</h2>
      <p>Connect your Habitica account to view and complete tasks from within
        the streaming dashboard.  Your API credentials remain stored locally
        inside IndexedDB for offline access.</p>
      <form id="habitica-form">
        <label>
          User ID
          <input type="text" id="habitica-user" placeholder="UUID" required />
        </label>
        <label>
          API Token
          <input type="password" id="habitica-token" placeholder="Token" required />
        </label>
        <button type="submit">Save Credentials</button>
      </form>
      <button id="fetchTasks">Fetch Tasks</button>
      <div id="habitica-tasks"></div>
    </section>
    <!-- Chat panel -->
    <section id="chat" aria-label="AI Chat panel">
      <h2>WebLLM Chat</h2>
      <p>Ask questions or brainstorm ideas with an on‑device large language model.
        Responses are generated locally using WebLLM; they never leave your
        browser.  If the model fails to load, the system falls back to a simple
        echo bot.</p>
      <div id="chat-container">
        <div id="chat-log" aria-live="polite"></div>
        <div id="chat-input">
          <textarea id="chat-prompt" rows="2" placeholder="Enter your message..."></textarea>
          <button id="chat-send">Send</button>
        </div>
      </div>
    </section>
    <!-- Log panel -->
    <section id="logs" aria-label="Event logs panel">
      <h2>System Logs</h2>
      <div id="log-container"></div>
    </section>
  </main>
  <!-- External translation script from the Planetary Restoration Archive (optional) -->
  <script src="planetaryrestorationarchive.com/ref/translation/script1.html"></script>
  <!-- Import WebLLM via CDN; a module is loaded asynchronously to minimize blocking. -->
  <script type="module">
    // Star field animation using Canvas 2D API.  If Canvas fails, fall back to a CSS
    // gradient.  The animation draws stars with random positions, sizes and
    // velocities to create a photorealistic effect.
    (() => {
      const canvas = document.getElementById('starfield');
      if (!canvas || !canvas.getContext) {
        console.warn('Canvas not supported. Falling back to gradient.');
        document.body.style.background = 'radial-gradient(circle at center, #020917 0%, #010a1a 100%)';
        return;
      }
      const ctx = canvas.getContext('2d');
      const stars = [];
      const numStars = 200;
      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener('resize', resizeCanvas);
      resizeCanvas();
      function createStar() {
        return {
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          radius: Math.random() * 1.5 + 0.5,
          speed: Math.random() * 0.5 + 0.2,
          opacity: Math.random() * 0.5 + 0.3
        };
      }
      for (let i = 0; i < numStars; i++) stars.push(createStar());
      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#010a1a';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        for (const star of stars) {
          ctx.beginPath();
          ctx.arc(star.x, star.y, star.radius, 0, 2 * Math.PI);
          ctx.fillStyle = `rgba(255, 255, 255, ${star.opacity})`;
          ctx.fill();
          star.y += star.speed;
          if (star.y > canvas.height) {
            star.x = Math.random() * canvas.width;
            star.y = 0;
            star.speed = Math.random() * 0.5 + 0.2;
            star.opacity = Math.random() * 0.5 + 0.3;
          }
        }
        requestAnimationFrame(draw);
      }
      draw();